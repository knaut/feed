{"version":3,"sources":["../server/index.js"],"names":["app","Koa","router","Router","oneDayMs","oneYearMs","base","__dirname","console","log","staticHandler","ctx","get","use","routes","PORT","process","env","listen"],"mappings":";;AAWA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AAGA;;;;;;;;AAEA,IAAMA,GAAG,GAAG,IAAIC,eAAJ,EAAZ;AACA,IAAMC,MAAM,GAAG,IAAIC,qBAAJ,EAAf,C,CAEA;;AACA,IAAMC,QAAQ,GAAG,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAlC;AACA,IAAMC,SAAS,GAAGD,QAAQ,GAAG,GAA7B,C,CAEA;;AACA,IAAME,IAAI,aAAMC,SAAN,CAAV;AACAC,OAAO,CAACC,GAAR,oBAA+BH,IAA/B;;AAEA,IAAMI,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG,iBAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA,6CAAa,yBAAQA,GAAR,YAAgBL,IAAhB,0BAAb;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbI,aAAa;AAAA;AAAA;AAAA,GAAnB;;AAEAR,MAAM,CAACU,GAAP,CAAW,GAAX,EAAgBF,aAAhB;AACAR,MAAM,CAACU,GAAP,CAAW,OAAX,EAAoBF,aAApB;AACAR,MAAM,CAACU,GAAP,CAAW,YAAX,EAAyBF,aAAzB,E,CAEA;;AACAV,GAAG,CAACa,GAAJ,CAAQ,yBAAR;AACAb,GAAG,CAACa,GAAJ,CAAQ,4BAAR;AACAb,GAAG,CAACa,GAAJ,CAAQ,qCAAUP,IAAV,eAAR;AACAN,GAAG,CAACa,GAAJ,CAAQX,MAAM,CAACY,MAAP,EAAR;AAEA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,GAAmBC,OAAO,CAACC,GAAR,CAAYF,IAA/B,GAAsC,IAAnD,C,CAEA;;AACAf,GAAG,CAACkB,MAAJ,CAAWH,IAAX;AAEA,6CAAqBA,IAArB","sourcesContent":["/*\n  _____                .____________\n_/ ____\\____  ____   __| _/   _____/ ______________  __ ___________\n\\   __\\/ __ \\/ __ \\ / __ |\\_____  \\_/ __ \\_  __ \\  \\/ // __ \\_  __ \\\n |  | \\  ___|  ___// /_/ |/        \\  ___/|  | \\/\\   /\\  ___/|  | \\/\n |__|  \\___  >___  >____ /_______  /\\___  >__|    \\_/  \\___  >__|\n           \\/    \\/     \\/       \\/     \\/                 \\/\n\n           Serve Feed web app files in a simple way.\n*/\n// IMPORTS\nimport '@babel/polyfill'\nimport findRoot from 'find-root'\n\n// KOA\nimport Koa from 'koa'\nimport logger from 'koa-logger'\nimport assets from 'koa-static'\nimport Router from 'koa-router'\nimport koaSend from 'koa-send'\n\n// MIDDLEWARE\nimport errors from './middleware/errors.js'\n\n// UTILS\nimport welcome from './utils/welcome'\n\nconst app = new Koa()\nconst router = new Router()\n\n// ROUTES\nconst oneDayMs = 1000 * 60 * 60 * 24;\nconst oneYearMs = oneDayMs * 365;\n\n// const base = findRoot(__dirname)\nconst base = `${__dirname}`\nconsole.log(`Directory base:`, base)\n\nconst staticHandler = async ctx => koaSend(ctx, `${base}/../build/index.html`)\n\nrouter.get('/', staticHandler)\nrouter.get('/(.*)', staticHandler)\nrouter.get('/(.*)/feed', staticHandler)\n\n// ATTACH MIDDLEWARE\napp.use(errors())\napp.use(logger())\napp.use(assets(`${base}/../build`))\napp.use(router.routes())\n\nconst PORT = process.env.PORT ? process.env.PORT : 3000\n\n// START\napp.listen(PORT)\n\nwelcome(`localhost:${PORT}`)\n"],"file":"index.js"}